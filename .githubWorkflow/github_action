# This is a basic workflow to help you get started with Actions
name: ic demo github actions sync to hugging face hub

# Controls when the workflow will run
on:
  push:
    branches: [ "main" ]

# Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  deploy:
    runs-on: ubuntu-latest
    env:
      HF_TOKEN : ${{ secrets.HF_TOKEN }}
    
    steps:
      - name: Checkout code with full history
        uses: actions/checkout@v3
        with:
          fetch-depth: 0   # Important to allow full push

      - name: Set Git config
        run: |
          git config --global user.email arafmustavi@gmail.com
          git config --global user.name arafmustavi

      - name: Add Hugging Face remote and push
        run: |
          git remote add hf https://user:${HF_TOKEN}@huggingface.co/spaces/Atik513/first_space  #<username>/<space-name>
          git push hf main --force
